
  
  <div class="flex-header" *ngIf="index===0">
    <div class="flex-cell color"></div>
    <div class="flex-cell">Username</div>
    <div class="flex-cell">Scenario</div>
    <div class="flex-cell">Course</div>
    <div class="flex-cell center">Progress</div>
    <div class="flex-cell center">Time</div>
    <div class="flex-cell center">Action</div>
</div>

<div class="flex-row">
    <div class="flex-cell color progress">
        <progress
          class="{{ getProgressColorClass() }}"
          [value]="getProgress() || 0"
          max="100"
        ></progress>
    </div>
    <div class="flex-cell pointer">{{ getUsername() }} </div>
    <div class="flex-cell"><cds-icon shape="play" solid></cds-icon> {{ progress.scenario_name }}</div>
    <div class="flex-cell"><cds-icon shape="layers" solid></cds-icon> {{ progress.course_name }}</div>
    <div class="flex-cell center"><cds-icon shape="number-list"></cds-icon> {{ progress.current_step }} / {{ progress.total_step }}</div>
    <div class="flex-cell center"><cds-icon shape="clock"></cds-icon> {{ timeSince(progress.started) }}</div>
    <div class="flex-cell center">
      
      <clr-dropdown [clrCloseMenuOnItemClick]="false">
        <button clrDropdownTrigger aria-label="Dropdown demo button">
          <cds-icon shape="ellipsis-horizontal" size="24" direction="down"></cds-icon>
        </button>
        <clr-dropdown-menu clrPosition="left-top" *clrIfOpen>
          <div 
            aria-label="Dropdown header info" 
            (click)="openInfo()" 
            clrDropdownItem
          >Info</div>
          <div 
            aria-label="Dropdown header join" 
            clrDropdownItem
            class="dropdown-item"
            (click)="openTerminalWindow()"
            [clrDisabled]="progress.finished"
            *rbac="[
              'sessions.get',
              'courses.get',
              'progresses.list',
              'scenarios.get',
              'virtualmachineclaims.get'
            ]"
            >Join Session</div>
          <div class="dropdown-divider" role="separator" aria-hidden="true"></div>
          <div 
            class="dropdown-item"
            (click)="terminateSession()"
            [clrDisabled]="progress.finished"
            clrDropdownItem
            *rbac="['sessions.update']"
          >Terminate Session</div>
        </clr-dropdown-menu>
      </clr-dropdown>

  </div>
</div>

<progress-info
  #progressInfo
  [progress]="progress"
  [pause]="pause"
></progress-info>