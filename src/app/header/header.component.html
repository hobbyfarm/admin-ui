<div class="branding">
    <a class="logo-and-title">
        <cds-icon shape="logo"></cds-icon>
        <span class="title">{{ title }}</span>
    </a>
</div>

<div class="header-nav">
    <a href="javascript://" class="nav-link nav-text" [routerLink]="['/home']" [routerLinkActive]="'active'">Home</a>
    <a href="javascript://" class="nav-link nav-text" [routerLink]="['/dashboards']" [routerLinkActive]="'active'" *rbac="['scheduledevents.list']">Dashboards</a>
    <a href="javascript://" class="nav-link nav-text" [routerLink]="['/events']" [routerLinkActive]="'active'" *rbac="['scheduledevents.list']">Scheduled Events</a>
    <a href="javascript://" class="nav-link nav-text" [routerLink]="['/content']" [routerLinkActive]="'active'" *rbac="['scenarios.list', 'courses.list']; op 'OR'">Content Management</a>
    <a href="javascript://" class="nav-link nav-text" [routerLink]="['/users']" [routerLinkActive]="'active'" *rbac="['users.list']">Users</a>
    <a href="javascript://" class="nav-link nav-text" [routerLink]="['/configuration']" [routerLinkActive]="'active'" *ngIf="configurationRbac">Configuration</a>
</div>

<div class="header-actions">
    <clr-dropdown>
        <button class="nav-text" clrDropdownToggle>
            {{email}}
            <cds-icon shape="angle" direction="down"></cds-icon>
        </button>
        <clr-dropdown-menu *clrIfOpen clrPosition="bottom-right">
            <a (click)="about()" clrDropdownItem>About</a>
            <a (click)="openSettings()" clrDropdownItem>Settings</a>
            <a (click)="logout()" clrDropdownItem>Logout</a>
        </clr-dropdown-menu>
    </clr-dropdown>
</div>

<clr-modal #settingsmodal [(clrModalOpen)]="settingsModalOpened">
    <h3 class="modal-title">Settings</h3>
    <div class="modal-body">
      <ng-container *ngIf="fetchingSettings">
        <span class="spinner spinner-inline"> Loading... </span>
        <span> Loading... </span>
      </ng-container>
      <ng-container *ngIf="!fetchingSettings">
        <form clrForm [formGroup]="settingsForm">
          <clr-tabs>
            <clr-tab>
              <button clrTabLink>General</button>
              <clr-tab-content>
                <clr-toggle-container>
                  <label class="clr-col-md-4">Hide Usernames</label>
                  <clr-toggle-wrapper>
                    <input
                      class="clr-col-md-8"
                      type="checkbox"
                      clrToggle
                      name="hide_usernames_status"
                      formControlName="hide_usernames_status"
                    />
                    <label>Hide Usernames</label>
                  </clr-toggle-wrapper>
                  <clr-control-helper
                    >Keep names hidden in screensharings
                  </clr-control-helper>
                </clr-toggle-container>
              </clr-tab-content>
              <clr-tab-content> </clr-tab-content>
            </clr-tab>

            <clr-tab>
              <button clrTabLink>Terminal Theme</button>
              <clr-tab-content>
                <div
                  *ngFor="let theme of themes"
                  class="radio-box-container clr-col-6"
                >
                  <label class="theme-preview-radio-box clr-col-md-12">
                    <input
                      class="theme-preview-radio-button"
                      type="radio"
                      [value]="theme.id"
                      name="terminal_theme"
                      formControlName="terminal_theme"
                    />
                    <div class="theme-preview-container">
                      <div
                        class="theme-preview-terminal"
                        [ngStyle]="{
                          'background-color': theme.styles.background
                        }"
                      >
                        <div class="theme-preview-terminal-text">
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <br />
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <div class="theme-preview-terminal-space"></div>
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <div
                          class="theme-preview-terminal-text"
                          style="
                            background-color: rgba(255, 255, 255, 0.3);
                            width: 50%;
                          "
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <div
                          class="theme-preview-terminal-text"
                          style="
                            background-color: rgba(255, 255, 255, 0.3);
                            width: 27%;
                          "
                        ></div>
                        <br />
                        <div
                          class="theme-preview-terminal-text"
                          style="
                            background-color: rgba(255, 255, 255, 0.3);
                            width: 4%;
                          "
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <div
                          class="theme-preview-terminal-text"
                          style="
                            background-color: rgba(255, 255, 255, 0.3);
                            width: 5%;
                          "
                        ></div>
                        <div
                          class="theme-preview-terminal-text"
                          style="
                            background-color: rgba(255, 255, 255, 0.3);
                            width: 6%;
                          "
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <br />
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.blue
                            }"
                          ></div>
                        </div>
                        <div class="theme-preview-terminal-space"></div>
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.green
                            }"
                          ></div>
                        </div>
                        <div class="theme-preview-terminal-space"></div>
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{ 'background-color': theme.styles.red }"
                          ></div>
                        </div>
                        <div class="theme-preview-terminal-space"></div>
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.cyan
                            }"
                          ></div>
                        </div>
                        <div class="theme-preview-terminal-space"></div>
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.yellow
                            }"
                          ></div>
                        </div>
                        <div class="theme-preview-terminal-space"></div>
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 10%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.magenta
                            }"
                          ></div>
                        </div>

                        <br />
                        <div
                          class="theme-preview-terminal-text"
                          style="width: 4%"
                        >
                          <div
                            class="theme-preview-terminal-text-bar"
                            [ngStyle]="{
                              'background-color': theme.styles.foreground
                            }"
                          ></div>
                        </div>
                        <div
                          class="theme-preview-terminal-cursor"
                          [ngStyle]="{
                            'background-color': theme.styles.cursor
                          }"
                        ></div>
                      </div>
                      <div class="theme-preview-name">
                        {{ theme.name }}
                      </div>
                    </div>
                  </label>
                </div>
              </clr-tab-content>
            </clr-tab>
          </clr-tabs>
        </form>
      </ng-container>
    </div>
    <div class="modal-footer">
      <button class="btn" (click)="settingsModalOpened = false">Close</button>
      <button class="btn btn-success" (click)="doSaveSettings()" [disabled]="isButtonDisabled">Save</button>
    </div>
  </clr-modal>

<clr-modal #logoutmodal [(clrModalOpen)]="logoutModalOpened">
    <h3 class="modal-title">Confirm Logout</h3>
    <div class="modal-body">
        <p>
            Are you sure you want to logout?
        </p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="logoutModalOpened = false">Cancel</button>
        <button type="button" class="btn btn-danger-outline" (click)="doLogout()">Logout</button>
    </div>
</clr-modal>

<clr-modal #aboutmodal [(clrModalOpen)]="aboutModalOpened">
    <h3 class="modal-title">About HobbyFarm</h3>
    <div class="modal-body">
        <p>
            HobbyFarm was lovingly crafted by @ebauman and @Oats87 from @RancherLabs
        </p>
        <p>
            <i>UI Version: {{version}}</i>
        </p>
    </div>
</clr-modal>
